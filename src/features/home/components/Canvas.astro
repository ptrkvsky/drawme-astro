<script>
  import handleCurtainSuccess from '@features/project/functions/handleCurtainSuccess';
  import { Curtains } from 'curtainsjs';

  window.addEventListener('load', () => {
    if (!document.querySelector('#main-canva')) return;
    /**
     * BLACK
     */
    const curtainBlack = new Curtains({
      container: document.getElementById('main-canva'),
      pixelRatio: Math.min(1.5, window.devicePixelRatio),
    });

    const bgBlack = {
      r: 0,
      v: 0,
      b: 0,
    };

    curtainBlack.onSuccess(
      handleCurtainSuccess(curtainBlack, 'main-canva', 2.23, 2.875, bgBlack)
    );

    /**
     * WHITE
     */
    const curtainWhite = new Curtains({
      container: 'canva-white',
      pixelRatio: Math.min(1.5, window.devicePixelRatio),
    });

    const bgWhite = {
      r: 255,
      v: 255,
      b: 255,
    };

    curtainWhite.onSuccess(
      handleCurtainSuccess(curtainWhite, 'canva-white', 2.28, 0.5, bgWhite)
    );
  });
</script>

<div id="main-canva" class="canva"></div>
<div id="canva-white" class="canva"></div>

<style lang="scss">
  .canva {
    opacity: 0;
    position: fixed;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    transition: all 0.3s linear;

    &.visible {
      opacity: 1;
    }
  }
</style>
